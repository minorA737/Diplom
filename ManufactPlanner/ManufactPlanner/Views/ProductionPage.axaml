<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="760" d:DesignHeight="640"
             x:Class="ManufactPlanner.Views.ProductionPage"
             x:DataType="vm:ProductionViewModel"
             xmlns:vm="using:ManufactPlanner.ViewModels"
			 xmlns:converters="using:ManufactPlanner.Converters">
	<UserControl.Resources>
		<converters:BoolToValueConverter x:Key="BoolToValue"/>
		<converters:IsGreaterThanConverter x:Key="IsGreaterThan"/>
		<converters:StringEqualsValueConverter x:Key="StringEqualsValue"/>
		<converters:MarginConverter x:Key="MarginConverter"/>
	</UserControl.Resources>

	<Grid RowDefinitions="Auto,Auto,*">
		<!-- Заголовок страницы -->
		<TextBlock Grid.Row="0" Text="Производство" FontSize="20" FontWeight="SemiBold" Foreground="#333333" Margin="20,20,0,0"/>

		<!-- Карточки статистики -->
		<Grid Grid.Row="1" Margin="20,20,20,0" ColumnDefinitions="*,*,*" RowDefinitions="Auto">
			<!-- Карточка 1: В производстве -->
			<Border Grid.Column="0" Height="120" Background="White" CornerRadius="8" Margin="0,0,10,0"
                    BoxShadow="0 2 3 #10000000">
				<Grid Margin="20,0">
					<StackPanel VerticalAlignment="Center">
						<TextBlock Text="В производстве" FontSize="14" Foreground="#9E9E9E"/>
						<TextBlock Text="{Binding InProductionCount}" FontSize="30" FontWeight="Medium" Foreground="#333333" Margin="0,10,0,0"/>
						<StackPanel Orientation="Horizontal" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0,0,10,10">
							<Border Width="70" Height="24" Background="#9575CD" Opacity="0.2" CornerRadius="12">
								<TextBlock Text="+3" FontSize="12" Foreground="#9575CD" HorizontalAlignment="Center" VerticalAlignment="Center"/>
							</Border>
						</StackPanel>
					</StackPanel>
				</Grid>
			</Border>

			<!-- Карточка 2: На отладке -->
			<Border Grid.Column="1" Height="120" Background="White" CornerRadius="8" Margin="10,0"
                    BoxShadow="0 2 3 #10000000">
				<Grid Margin="20,0">
					<StackPanel VerticalAlignment="Center">
						<TextBlock Text="На отладке" FontSize="14" Foreground="#9E9E9E"/>
						<TextBlock Text="{Binding DebuggingCount}" FontSize="30" FontWeight="Medium" Foreground="#333333" Margin="0,10,0,0"/>
						<StackPanel Orientation="Horizontal" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0,0,10,10">
							<Border Width="70" Height="24" Background="#4CAF9D" Opacity="0.2" CornerRadius="12">
								<TextBlock Text="+1" FontSize="12" Foreground="#4CAF9D" HorizontalAlignment="Center" VerticalAlignment="Center"/>
							</Border>
						</StackPanel>
					</StackPanel>
				</Grid>
			</Border>

			<!-- Карточка 3: Готово к упаковке -->
			<Border Grid.Column="2" Height="120" Background="White" CornerRadius="8" Margin="10,0,0,0"
                    BoxShadow="0 2 3 #10000000">
				<Grid Margin="20,0">
					<StackPanel VerticalAlignment="Center">
						<TextBlock Text="Готово к упаковке" FontSize="14" Foreground="#9E9E9E"/>
						<TextBlock Text="{Binding ReadyForPackagingCount}" FontSize="30" FontWeight="Medium" Foreground="#333333" Margin="0,10,0,0"/>
						<StackPanel Orientation="Horizontal" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0,0,10,10">
							<Border Width="70" Height="24" Background="#FFB74D" Opacity="0.2" CornerRadius="12">
								<TextBlock Text="Срочно" FontSize="12" Foreground="#FFB74D" HorizontalAlignment="Center" VerticalAlignment="Center"/>
							</Border>
						</StackPanel>
					</StackPanel>
				</Grid>
			</Border>
		</Grid>

		<!-- Таблица производственных заданий -->
		<Border Grid.Row="2" Margin="20,20,20,20" Background="White" CornerRadius="8" BoxShadow="0 2 3 #10000000">
			<Grid RowDefinitions="Auto,*">
				<!-- Заголовок таблицы -->
				<Grid Grid.Row="0" Background="#F8F9FA" Height="40" ColumnDefinitions="150,200,150,100,100,*">
					<TextBlock Grid.Column="0" Text="№ заказ-наряда" FontSize="12" Foreground="#666" FontWeight="Medium" Margin="20,0,0,0" VerticalAlignment="Center"/>
					<TextBlock Grid.Column="1" Text="Наименование" FontSize="12" Foreground="#666" FontWeight="Medium" VerticalAlignment="Center"/>
					<TextBlock Grid.Column="2" Text="Мастер" FontSize="12" Foreground="#666" FontWeight="Medium" VerticalAlignment="Center"/>
					<TextBlock Grid.Column="3" Text="Дата начала" FontSize="12" Foreground="#666" FontWeight="Medium" VerticalAlignment="Center"/>
					<TextBlock Grid.Column="4" Text="Дата окончания" FontSize="12" Foreground="#666" FontWeight="Medium" VerticalAlignment="Center"/>
					<TextBlock Grid.Column="5" Text="Статус" FontSize="12" Foreground="#666" FontWeight="Medium" Margin="20,0,0,0" VerticalAlignment="Center"/>
				</Grid>

				<!-- Линия разделителя -->
				<Rectangle Grid.Row="0" Height="1" Fill="#E0E0E0" VerticalAlignment="Bottom" IsHitTestVisible="False"/>

				<!-- Список производственных заданий -->
				<ScrollViewer Grid.Row="1">
					<ItemsControl ItemsSource="{Binding ProductionItems}">
						<ItemsControl.ItemTemplate>
							<DataTemplate>
								<Grid Height="60" ColumnDefinitions="150,200,150,100,100,*" Background="{Binding IsAlternate, Converter={StaticResource BoolToValue}, ConverterParameter='White,#F9FAFB'}">
									<TextBlock Grid.Column="0" Text="{Binding OrderNumber}" FontSize="13" Foreground="#333" Margin="20,0,0,0" VerticalAlignment="Center"/>
									<StackPanel Grid.Column="1" VerticalAlignment="Center">
										<TextBlock Text="{Binding Name}" FontSize="13" Foreground="#333" TextWrapping="Wrap"/>
										<TextBlock Text="{Binding OrderReference}" FontSize="11" Foreground="#666"/>
									</StackPanel>
									<TextBlock Grid.Column="2" Text="{Binding Master}" FontSize="12" Foreground="#333" VerticalAlignment="Center"/>
									<TextBlock Grid.Column="3" Text="{Binding StartDate}" FontSize="12" Foreground="#333" VerticalAlignment="Center"/>
									<TextBlock Grid.Column="4" Text="{Binding EndDate}" FontSize="12" Foreground="#333" VerticalAlignment="Center"/>

									<!-- Статус производства -->
									<StackPanel Grid.Column="5" Orientation="Horizontal" VerticalAlignment="Center" Margin="20,0,0,0">
										<Border Height="24" CornerRadius="12" Padding="10,0" Background="{Binding StatusColor}" Opacity="0.2">
											<TextBlock Text="{Binding Status}" FontSize="12" Foreground="{Binding StatusColor}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
										</Border>

										<!-- Прогресс выполнения -->
										<Grid Width="120" Height="4" Margin="15,0,0,0" VerticalAlignment="Center">
											<Border Background="#E0E0E0" Width="120" Height="4" CornerRadius="2"/>
											<Border Background="{Binding StatusColor}" Width="{Binding ProgressWidth}" Height="4" HorizontalAlignment="Left" CornerRadius="2"/>
										</Grid>

										<TextBlock Text="{Binding Progress}" FontSize="12" Foreground="#666" Margin="5,0,0,0" VerticalAlignment="Center"/>
									</StackPanel>

									<!-- Линия разделителя -->
									<Rectangle Grid.ColumnSpan="6" Height="1" Fill="#E0E0E0" VerticalAlignment="Bottom"/>
								</Grid>
							</DataTemplate>
						</ItemsControl.ItemTemplate>
					</ItemsControl>
				</ScrollViewer>
			</Grid>
		</Border>
	</Grid>
</UserControl>
