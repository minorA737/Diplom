<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="760" d:DesignHeight="640"
             x:Class="ManufactPlanner.Views.SettingsPage"
             x:DataType="vm:SettingsViewModel"
             xmlns:vm="using:ManufactPlanner.ViewModels"
             xmlns:converters="using:ManufactPlanner.Converters">
	<UserControl.Resources>
		<converters:BoolToValueConverter x:Key="BoolToValue"/>
		<converters:IsGreaterThanConverter x:Key="IsGreaterThan"/>
		<converters:StringEqualsValueConverter x:Key="StringEqualsValue"/>
		<converters:MarginConverter x:Key="MarginConverter"/>
	</UserControl.Resources>

	<Grid RowDefinitions="Auto,*">
		<!-- Заголовок страницы -->
		<TextBlock Grid.Row="0" Text="{Binding InterfaceSettingsText}"
                   FontSize="20" FontWeight="SemiBold"
                   Foreground="{DynamicResource TextPrimaryBrush}" Margin="20,20,0,0"/>
		
		<!-- Основное содержимое - категории настроек -->
		<ScrollViewer Grid.Row="1" Margin="20,20,20,20">
			<StackPanel Spacing="20">
				<!-- Сообщение о статусе операции -->
				<Border Background="{Binding IsStatusSuccess, Converter={StaticResource BoolToValue}, ConverterParameter='{DynamicResource SuccessColor},{DynamicResource ErrorColor}'}"
                        Opacity="0.2"
                        IsVisible="{Binding HasStatusMessage}"
                        Padding="15" CornerRadius="4">
					<TextBlock Text="{Binding StatusMessage}"
                              Foreground="{Binding IsStatusSuccess, Converter={StaticResource BoolToValue}, ConverterParameter='{DynamicResource SuccessColor},{DynamicResource ErrorColor}'}"
                              FontSize="14"/>
				</Border>
				<!-- Категория: автозапуск -->
				<Border Background="{DynamicResource SurfaceBrush}" CornerRadius="8">
					<StackPanel Margin="20">
						<TextBlock Text="Автозапуск приложения"
								  FontSize="16" FontWeight="Medium"
								  Foreground="{DynamicResource TextPrimaryBrush}"/>
						<Rectangle Height="1" Fill="{DynamicResource BorderBrush}" Margin="0,10,0,20"/>

						<Grid ColumnDefinitions="Auto,*" Margin="0,0,0,10">
							<TextBlock Grid.Column="0" Text="Автозапуск"
								FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"
								VerticalAlignment="Center"/>
							<CheckBox Grid.Column="1" Margin="20,0,0,0"
								IsChecked="{Binding AutoStartEnabled}"
								Content="Запускать при входе в систему"
								Foreground="{DynamicResource TextPrimaryBrush}"/>
						</Grid>

						<Button Content="Применить настройки автозапуска" Width="250"
								Height="36" Background="{DynamicResource PrimaryBrush}"
								Foreground="{DynamicResource SurfaceBrush}"
								HorizontalAlignment="Left" CornerRadius="18"
								Command="{Binding ApplyAutoStartCommand}"
								Margin="0,10,0,0"/>
					</StackPanel>
				</Border>	

				<!-- Категория: Профиль пользователя -->
				<Border Background="{DynamicResource SurfaceBrush}" CornerRadius="8">
					<StackPanel Margin="20">
						<TextBlock Text="{Binding ProfileSettingsText}"
                                  FontSize="16" FontWeight="Medium"
                                  Foreground="{DynamicResource TextPrimaryBrush}"/>
						<Rectangle Height="1" Fill="{DynamicResource BorderBrush}" Margin="0,10,0,20"/>

						<Grid ColumnDefinitions="150,*" RowDefinitions="Auto,Auto,Auto,Auto" Margin="0,0,0,10">
							<TextBlock Grid.Row="0" Grid.Column="0" Text="{Binding UsernameText}"
                                      FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"
                                      VerticalAlignment="Center"/>
							<TextBox Grid.Row="0" Grid.Column="1" Text="{Binding Username}" IsEnabled="False"
                                     Width="250" Height="36" HorizontalAlignment="Left"/>

							<TextBlock Grid.Row="1" Grid.Column="0" Text="{Binding FirstNameText}"
                                       FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"
                                       VerticalAlignment="Center" Margin="0,15,0,0"/>
							<TextBox Grid.Row="1" Grid.Column="1" Text="{Binding FirstName}"
                                     Width="250" Height="36" HorizontalAlignment="Left" Margin="0,15,0,0"/>

							<TextBlock Grid.Row="2" Grid.Column="0" Text="{Binding LastNameText}"
                                       FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"
                                       VerticalAlignment="Center" Margin="0,15,0,0"/>
							<TextBox Grid.Row="2" Grid.Column="1" Text="{Binding LastName}"
                                     Width="250" Height="36" HorizontalAlignment="Left" Margin="0,15,0,0"/>

							<TextBlock Grid.Row="3" Grid.Column="0" Text="{Binding EmailText}"
                                       FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"
                                       VerticalAlignment="Center" Margin="0,15,0,0"/>
							<TextBox Grid.Row="3" Grid.Column="1" Text="{Binding Email}"
                                     Width="250" Height="36" HorizontalAlignment="Left" Margin="0,15,0,0"/>
						</Grid>

						<Button Content="{Binding SaveChangesText}" Width="200" Height="36"
                                Background="{DynamicResource PrimaryBrush}" Foreground="{DynamicResource SurfaceBrush}"
                                HorizontalAlignment="Left" CornerRadius="18"
                                Command="{Binding SaveProfileCommand}"/>
					</StackPanel>
				</Border>

				<!-- Категория: Изменение пароля -->
				<Border Background="{DynamicResource SurfaceBrush}" CornerRadius="8">
					<StackPanel Margin="20">
						<TextBlock Text="{Binding PasswordSettingsText}"
                                   FontSize="16" FontWeight="Medium"
                                   Foreground="{DynamicResource TextPrimaryBrush}"/>
						<Rectangle Height="1" Fill="{DynamicResource BorderBrush}" Margin="0,10,0,20"/>

						<Grid ColumnDefinitions="150,*" RowDefinitions="Auto,Auto,Auto" Margin="0,0,0,10">
							<TextBlock Grid.Row="0" Grid.Column="0" Text="{Binding CurrentPasswordText}"
                                       FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"
                                       VerticalAlignment="Center"/>
							<TextBox Grid.Row="0" Grid.Column="1" PasswordChar="•" Text="{Binding CurrentPassword}"
                                     Width="250" Height="36" HorizontalAlignment="Left"/>

							<TextBlock Grid.Row="1" Grid.Column="0" Text="{Binding NewPasswordText}"
                                       FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"
                                       VerticalAlignment="Center" Margin="0,15,0,0"/>
							<TextBox Grid.Row="1" Grid.Column="1" PasswordChar="•" Text="{Binding NewPassword}"
                                     Width="250" Height="36" HorizontalAlignment="Left" Margin="0,15,0,0"/>

							<TextBlock Grid.Row="2" Grid.Column="0" Text="{Binding ConfirmPasswordText}"
                                       FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"
                                       VerticalAlignment="Center" Margin="0,15,0,0"/>
							<TextBox Grid.Row="2" Grid.Column="1" PasswordChar="•" Text="{Binding ConfirmPassword}"
                                     Width="250" Height="36" HorizontalAlignment="Left" Margin="0,15,0,0"/>
						</Grid>

						<Button Content="{Binding ChangePasswordText}" Width="200" Height="36"
                                Background="{DynamicResource PrimaryBrush}" Foreground="{DynamicResource SurfaceBrush}"
                                HorizontalAlignment="Left" CornerRadius="18"
                                Command="{Binding ChangePasswordCommand}"/>
					</StackPanel>
				</Border>

				<!-- Категория: Настройки уведомлений -->
				<Border Background="{DynamicResource SurfaceBrush}" CornerRadius="8">
					<StackPanel Margin="20">
						<TextBlock Text="{Binding NotificationSettingsText}"
                                   FontSize="16" FontWeight="Medium"
                                   Foreground="{DynamicResource TextPrimaryBrush}"/>
						<Rectangle Height="1" Fill="{DynamicResource BorderBrush}" Margin="0,10,0,20"/>

						<StackPanel Spacing="15">
							<CheckBox Content="{Binding NotifyNewTasksText}" IsChecked="{Binding NotifyNewTasks}"
                                      Foreground="{DynamicResource TextPrimaryBrush}"/>
							<CheckBox Content="{Binding NotifyStatusChangesText}" IsChecked="{Binding NotifyTaskStatusChanges}"
                                      Foreground="{DynamicResource TextPrimaryBrush}"/>
							<CheckBox Content="{Binding NotifyCommentsText}" IsChecked="{Binding NotifyComments}"
                                      Foreground="{DynamicResource TextPrimaryBrush}"/>
							<CheckBox Content="{Binding NotifyDeadlinesText}" IsChecked="{Binding NotifyDeadlines}"
                                      Foreground="{DynamicResource TextPrimaryBrush}"/>
							<CheckBox Content="{Binding NotifyEmailText}" IsChecked="{Binding NotifyEmail}"
                                      Foreground="{DynamicResource TextPrimaryBrush}"/>
							<CheckBox Content="{Binding NotifyDesktopText}" IsChecked="{Binding NotifyDesktop}"
                                      Foreground="{DynamicResource TextPrimaryBrush}"/>
						</StackPanel>

						<Button Content="{Binding SaveNotificationSettingsText}" Width="200" Height="36"
                                Background="{DynamicResource PrimaryBrush}" Foreground="{DynamicResource SurfaceBrush}"
                                HorizontalAlignment="Left" CornerRadius="18" Margin="0,15,0,0"
                                Command="{Binding SaveNotificationSettingsCommand}"/>
					</StackPanel>
				</Border>

				<!-- Категория: Интерфейс -->
				<Border Background="{DynamicResource SurfaceBrush}" CornerRadius="8">
					<StackPanel Margin="20">
						<TextBlock Text="{Binding InterfaceSettingsText}"
                                   FontSize="16" FontWeight="Medium"
                                   Foreground="{DynamicResource TextPrimaryBrush}"/>
						<Rectangle Height="1" Fill="{DynamicResource BorderBrush}" Margin="0,10,0,20"/>

						<Grid ColumnDefinitions="150,*" RowDefinitions="Auto,Auto" Margin="0,0,0,10">
							<TextBlock Grid.Row="0" Grid.Column="0" Text="{Binding LanguageText}"
                                       FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"
                                       VerticalAlignment="Center"/>
							<ComboBox Grid.Row="0" Grid.Column="1" Width="250" HorizontalAlignment="Left"
                                      SelectedIndex="{Binding SelectedLanguage}">
								<ComboBoxItem>Русский</ComboBoxItem>
								<ComboBoxItem>English</ComboBoxItem>
							</ComboBox>

							<TextBlock Grid.Row="1" Grid.Column="0" Text="{Binding ThemeText}"
                                       FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"
                                       VerticalAlignment="Center" Margin="0,15,0,0"/>
							<StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Margin="0,15,0,0" Spacing="15">
								<RadioButton Content="{Binding LightThemeText}" IsChecked="{Binding IsLightTheme}"
                                             GroupName="Theme" Foreground="{DynamicResource TextPrimaryBrush}"/>
								<RadioButton Content="{Binding DarkThemeText}" IsChecked="{Binding !IsLightTheme}"
                                             GroupName="Theme" Foreground="{DynamicResource TextPrimaryBrush}"/>
							</StackPanel>
						</Grid>

						<Button Content="{Binding ApplyText}" Width="200" Height="36"
                                Background="{DynamicResource PrimaryBrush}" Foreground="{DynamicResource SurfaceBrush}"
                                HorizontalAlignment="Left" CornerRadius="18"
                                Command="{Binding ApplyInterfaceSettingsCommand}"/>
					</StackPanel>
				</Border>

				<!-- Категория: О программе -->
				<Border Background="{DynamicResource SurfaceBrush}" CornerRadius="8">
					<StackPanel Margin="20">
						<TextBlock Text="{Binding AboutAppText}"
                                   FontSize="16" FontWeight="Medium"
                                   Foreground="{DynamicResource TextPrimaryBrush}"/>
						<Rectangle Height="1" Fill="{DynamicResource BorderBrush}" Margin="0,10,0,20"/>

						<StackPanel Spacing="10">
							<TextBlock Text="{Binding AppNameText}"
                                       FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}"/>
							<TextBlock Text="{Binding VersionText}"
                                       FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"/>
							<TextBlock Text="{Binding CopyrightText}"
                                       FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"/>

							<TextBlock Text="{Binding DevelopedAsText}"
                                       FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"
                                       Margin="0,15,0,0"/>
							<TextBlock Text="{Binding TechnologiesText}"
                                       FontSize="13" Foreground="{DynamicResource TextSecondaryBrush}"/>
						</StackPanel>
					</StackPanel>
				</Border>
			</StackPanel>
		</ScrollViewer>
	</Grid>
</UserControl>