<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="760" d:DesignHeight="640"
             x:Class="ManufactPlanner.Views.OrdersPage"
             x:DataType="vm:OrdersViewModel"
             xmlns:vm="using:ManufactPlanner.ViewModels"
			 
			 xmlns:converters="using:ManufactPlanner.Converters">
	<UserControl.Resources>
		<converters:BoolToValueConverter x:Key="BoolToValue"/>
		<converters:IsGreaterThanConverter x:Key="IsGreaterThan"/>
		<converters:StringEqualsValueConverter x:Key="StringEqualsValue"/>
		<converters:MarginConverter x:Key="MarginConverter"/>
	</UserControl.Resources>
	
	<Grid RowDefinitions="Auto,Auto,*">
		<!-- Заголовок страницы -->
		<Grid Grid.Row="0" ColumnDefinitions="*,Auto" Margin="20,20,20,0">
			<TextBlock Text="Заказы" FontSize="20" FontWeight="SemiBold" Foreground="#333333"/>

			<!-- Вид отображения -->
			<StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="15">
				<Border Width="130" Height="36" CornerRadius="18" Background="#F1F3F4">
					<Grid ColumnDefinitions="*,*">
						<Border Grid.Column="0" Width="65" Height="36" CornerRadius="18" Background="#00ACC1">
							<TextBlock Text="Таблица" FontSize="12" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Border>
						<TextBlock Grid.Column="1" Text="Карточки" FontSize="12" Foreground="#666" HorizontalAlignment="Center" VerticalAlignment="Center"/>
					</Grid>
				</Border>

				<!-- Кнопка создания заказа -->
				<Button Width="80" Height="36" CornerRadius="18" Background="#00ACC1" Command="{Binding CreateOrderCommand}">
					<TextBlock Text="+ Заказ" FontSize="12" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>
				</Button>
			</StackPanel>
		</Grid>

		<!-- Фильтры -->
		<Border Grid.Row="1" Margin="20,20,20,0" Background="White" CornerRadius="8" BoxShadow="0 2 3 #10000000">
			<StackPanel Orientation="Horizontal" Margin="20,10" Spacing="20">
				<!-- Фильтр Статус -->
				<Border Width="120" Height="26" CornerRadius="13" Background="#F1F3F4" BorderBrush="#E0E0E0" BorderThickness="1">
					<Grid ColumnDefinitions="*,Auto">
						<TextBlock Grid.Column="0" Text="Статус" FontSize="12" Foreground="#333" Margin="10,0,0,0" VerticalAlignment="Center"/>
						<TextBlock Grid.Column="1" Text="▼" FontSize="12" Foreground="#9E9E9E" Margin="0,0,10,0" VerticalAlignment="Center"/>
					</Grid>
				</Border>

				<!-- Фильтр Заказчик -->
				<Border Width="120" Height="26" CornerRadius="13" Background="#F1F3F4" BorderBrush="#E0E0E0" BorderThickness="1">
					<Grid ColumnDefinitions="*,Auto">
						<TextBlock Grid.Column="0" Text="Заказчик" FontSize="12" Foreground="#333" Margin="10,0,0,0" VerticalAlignment="Center"/>
						<TextBlock Grid.Column="1" Text="▼" FontSize="12" Foreground="#9E9E9E" Margin="0,0,10,0" VerticalAlignment="Center"/>
					</Grid>
				</Border>

				<!-- Фильтр Срок поставки -->
				<Border Width="140" Height="26" CornerRadius="13" Background="#F1F3F4" BorderBrush="#E0E0E0" BorderThickness="1">
					<Grid ColumnDefinitions="*,Auto">
						<TextBlock Grid.Column="0" Text="Срок поставки" FontSize="12" Foreground="#333" Margin="10,0,0,0" VerticalAlignment="Center"/>
						<TextBlock Grid.Column="1" Text="▼" FontSize="12" Foreground="#9E9E9E" Margin="0,0,10,0" VerticalAlignment="Center"/>
					</Grid>
				</Border>

				<!-- Фильтр Дата создания -->
				<Border Width="120" Height="26" CornerRadius="13" Background="#F1F3F4" BorderBrush="#E0E0E0" BorderThickness="1">
					<Grid ColumnDefinitions="*,Auto">
						<TextBlock Grid.Column="0" Text="Дата создания" FontSize="12" Foreground="#333" Margin="10,0,0,0" VerticalAlignment="Center"/>
						<TextBlock Grid.Column="1" Text="▼" FontSize="12" Foreground="#9E9E9E" Margin="0,0,10,0" VerticalAlignment="Center"/>
					</Grid>
				</Border>
			</StackPanel>
		</Border>

		<!-- Таблица заказов -->
		<Border Grid.Row="2" Margin="20,20,20,20" Background="White" CornerRadius="8" BoxShadow="0 2 3 #10000000">
			<Grid RowDefinitions="Auto,*,Auto">
				<!-- Заголовок таблицы -->
				<Grid Grid.Row="0" Background="#F8F9FA" Height="40" ColumnDefinitions="125,200,130,100,100,90,Auto">
					<TextBlock Grid.Column="0" Text="№ заказа" FontSize="12" Foreground="#666" FontWeight="Medium" Margin="25,0,0,0" VerticalAlignment="Center"/>
					<TextBlock Grid.Column="1" Text="Наименование" FontSize="12" Foreground="#666" FontWeight="Medium" VerticalAlignment="Center"/>
					<TextBlock Grid.Column="2" Text="Заказчик" FontSize="12" Foreground="#666" FontWeight="Medium" VerticalAlignment="Center"/>
					<TextBlock Grid.Column="3" Text="Срок" FontSize="12" Foreground="#666" FontWeight="Medium" VerticalAlignment="Center"/>
					<TextBlock Grid.Column="4" Text="Кол-во позиций" FontSize="12" Foreground="#666" FontWeight="Medium" VerticalAlignment="Center"/>
					<TextBlock Grid.Column="5" Text="Статус" FontSize="12" Foreground="#666" FontWeight="Medium" VerticalAlignment="Center"/>
					<TextBlock Grid.Column="6" Text="▾" FontSize="12" Foreground="#666" FontWeight="Medium" Margin="5,0" VerticalAlignment="Center"/>
				</Grid>

				<!-- Линия разделителя -->
				<Rectangle Grid.Row="0" Height="1" Fill="#E0E0E0" VerticalAlignment="Bottom" IsHitTestVisible="False"/>

				<!-- Список заказов -->
				<ScrollViewer Grid.Row="1">
					<ItemsControl ItemsSource="{Binding Orders}">
						<ItemsControl.ItemTemplate>
							<DataTemplate>
								<Grid Height="60" ColumnDefinitions="125,200,130,100,100,90,Auto" Background="{Binding IsAlternate, Converter={StaticResource BoolToValue}, ConverterParameter='White,#F9FAFB'}">
									<TextBlock Grid.Column="0" Text="{Binding OrderNumber}" FontSize="13" Foreground="#333" Margin="25,0,0,0" VerticalAlignment="Center"/>
									<TextBlock Grid.Column="1" Text="{Binding Name}" FontSize="13" Foreground="#333" VerticalAlignment="Center" TextWrapping="Wrap"/>
									<TextBlock Grid.Column="2" Text="{Binding Customer}" FontSize="12" Foreground="#333" VerticalAlignment="Center"/>
									<TextBlock Grid.Column="3" Text="{Binding Deadline}" FontSize="12" Foreground="{Binding IsDateCritical, Converter={StaticResource BoolToValue}, ConverterParameter='#FF7043,#333'}" VerticalAlignment="Center"/>
									<TextBlock Grid.Column="4" Text="{Binding PositionsCount}" FontSize="12" Foreground="#333" VerticalAlignment="Center"/>

									<!-- Статус заказа -->
									<Border Grid.Column="5" Width="50" Height="20" CornerRadius="10" Background="#4CAF9D" Opacity="0.2" VerticalAlignment="Center">
										<TextBlock Text="{Binding Status}" FontSize="11" Foreground="#4CAF9D" HorizontalAlignment="Center" VerticalAlignment="Center"/>
									</Border>

									<!-- Меню действий -->
									<!-- Command="{Binding $parent[ItemsControl].DataContext.ShowOrderDetailsCommand}" CommandParameter="{Binding Id}" -->
									<Button Grid.Column="6" Width="24" Height="24" CornerRadius="12" Background="#F1F3F4" Margin="5,0" VerticalAlignment="Center" >
										<TextBlock Text="⋮" FontSize="12" Foreground="#666" HorizontalAlignment="Center" VerticalAlignment="Center"/>
									</Button>

									<!-- Линия разделителя -->
									<Rectangle Grid.ColumnSpan="7" Height="1" Fill="#E0E0E0" VerticalAlignment="Bottom"/>
								</Grid>
							</DataTemplate>
						</ItemsControl.ItemTemplate>
					</ItemsControl>
				</ScrollViewer>

				<!-- Пагинация -->
				<StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Spacing="5" Margin="0,10">
					<TextBlock Text="◀ Пред." FontSize="13" Foreground="#666" VerticalAlignment="Center"/>
					<Border Width="30" Height="30" CornerRadius="15" Background="#00ACC1" VerticalAlignment="Center">
						<TextBlock Text="1" FontSize="13" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center"/>
					</Border>
					<TextBlock Text="2" FontSize="13" Foreground="#666" VerticalAlignment="Center" Margin="5,0"/>
					<TextBlock Text="..." FontSize="13" Foreground="#666" VerticalAlignment="Center" Margin="5,0"/>
					<TextBlock Text="След. ▶" FontSize="13" Foreground="#666" VerticalAlignment="Center"/>
				</StackPanel>
			</Grid>
		</Border>
	</Grid>
</UserControl>
