<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:converters="using:ManufactPlanner.Converters"
        mc:Ignorable="d" d:DesignWidth="1000" d:DesignHeight="700"
        x:Class="ManufactPlanner.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        xmlns:vm="using:ManufactPlanner.ViewModels"
        Icon="/Assets/logo.jpg"
        Title="ManufactPlanner"
        TransparencyLevelHint="AcrylicBlur"
        Background="Transparent"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        MinWidth="800"
        MinHeight="600">

	<Window.Resources>
		<converters:BoolToValueConverter x:Key="BoolToValue"/>
		<converters:IsGreaterThanConverter x:Key="IsGreaterThan"/>
		<converters:StringEqualsValueConverter x:Key="StringEqualsValue"/>
		<converters:MarginConverter x:Key="MarginConverter"/>
		<converters:PercentToWidthConverter x:Key="PercentToWidthConverter"/>
		<converters:AuthMarginConverter x:Key="AuthMarginConverter"/>

		<!-- ÐÐ´Ð°Ð¿Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ Ñ€ÐµÑÑƒÑ€ÑÑ‹ -->
		<x:Double x:Key="SmallScreenWidth">400</x:Double>
		<x:Double x:Key="MediumScreenWidth">800</x:Double>
		<x:Double x:Key="StandardSpacing">15</x:Double>
		<x:Double x:Key="SmallSpacing">10</x:Double>
	</Window.Resources>

	<Window.Styles>
		<!-- ÐÐ´Ð°Ð¿Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ ÑÑ‚Ð¸Ð»Ð¸ Ð´Ð»Ñ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ñ… ÐºÐ½Ð¾Ð¿Ð¾Ðº -->
		<Style Selector="Button.navButton">
			<Setter Property="Height" Value="40"/>
			<Setter Property="Background" Value="Transparent"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="Opacity" Value="0.9"/>
			<Setter Property="Margin" Value="5"/>
			<Setter Property="Padding" Value="5,0"/>
			<Setter Property="CornerRadius" Value="4"/>
			<Setter Property="HorizontalContentAlignment" Value="Left"/>
			<Setter Property="HorizontalAlignment" Value="Stretch"/>
		</Style>

		<Style Selector="Button.navButton:pointerover">
			<Setter Property="Background" Value="#008999"/>
			<Setter Property="Opacity" Value="1"/>
		</Style>

		
	</Window.Styles>

	<Grid>
		<!-- ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ñ„Ð¾Ð½ -->
		<Border Background="{DynamicResource BackgroundBrush}"/>

		<Grid RowDefinitions="Auto,*" ColumnDefinitions="Auto,*">
			<!-- Ð’ÐµÑ€Ñ…Ð½ÑÑ Ð¿Ð°Ð½ÐµÐ»ÑŒ -->
			<Border Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2"
                    Background="{DynamicResource SurfaceBrush}"
                    IsVisible="{Binding IsAuthenticated}"
                    Height="60"
                    BoxShadow="0 2 3 #10000000">
				<Grid Margin="10">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="Auto" MinWidth="150"/>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="Auto" MinWidth="200"/>
					</Grid.ColumnDefinitions>

					<!-- Ð›Ð¾Ð³Ð¾Ñ‚Ð¸Ð¿ Ð¸ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ -->
					<StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Spacing="10">
						<Image Source="/Assets/logo.jpg" Height="40" Width="40"/>
						<TextBlock Text="ManufactPlanner" FontSize="16" FontWeight="SemiBold"
                                  Foreground="{DynamicResource TextPrimaryBrush}" VerticalAlignment="Center"/>
					</StackPanel>

					<!-- ÐŸÑ€Ð¾Ñ„Ð¸Ð»ÑŒ Ð¸ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ -->
					<StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center" Spacing="15" HorizontalAlignment="Right">
						<!-- Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ -->
						<Button Width="40" Height="40" CornerRadius="20" Background="{DynamicResource BackgroundBrush}"
                               BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1"
                               Command="{Binding NavigateToNotifications}">
							<Grid>
								<Ellipse Width="14" Height="14" Fill="{DynamicResource WarningBrush}"/>
								<Border Width="16" Height="16" CornerRadius="8" Background="{DynamicResource ErrorBrush}"
										VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,-4,-4,0"
										IsVisible="{Binding UnreadNotificationsCount, Converter={StaticResource IsGreaterThan}, ConverterParameter='0'}">
									<TextBlock Text="{Binding UnreadNotificationsCount}" FontSize="9" Foreground="White"
											   HorizontalAlignment="Center" VerticalAlignment="Center"/>
								</Border>
							</Grid>
						</Button>

						<!-- ÐŸÑ€Ð¾Ñ„Ð¸Ð»ÑŒ -->
						<Button Width="40" Height="40" CornerRadius="20" Background="#9575CD" Opacity="0.7" Command="{Binding NextProfil}">
							<TextBlock Text="{Binding Inicial}" FontSize="14" Foreground="White"
									  HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Button>

						<!-- Ð’Ñ‹Ñ…Ð¾Ð´ -->
						<Button Background="Transparent" Command="{Binding Logout}" Padding="8,6">
							<TextBlock Text="Ð’Ñ‹Ñ…Ð¾Ð´" Foreground="#333" VerticalAlignment="Center"/>
						</Button>
					</StackPanel>
				</Grid>
			</Border>

			<!-- Ð‘Ð¾ÐºÐ¾Ð²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ Ð½Ð°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ð¸ -->
			<Grid Grid.Row="1" Grid.Column="0"
				  Width="{Binding IsSidebarCollapsed, Converter={StaticResource BoolToValue}, ConverterParameter='60,200'}"
				  IsVisible="{Binding IsAuthenticated}"
				  MinWidth="60">
				<!-- Ð¤Ð¾Ð½ Ñ Ñ‚ÐµÐ½ÑŒÑŽ -->
				<Border Background="{DynamicResource SidebarGradient}"
						BoxShadow="2 0 3 #10000000"
						CornerRadius="0,4,4,0">
					<ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
						<StackPanel Margin="0,20,0,20" Spacing="2">
							<!-- Ð”Ð°ÑˆÐ±Ð¾Ñ€Ð´ -->
							<Button Classes="navButton" Command="{Binding NavigateToDashboard}"
									Tag="{Binding CurrentMenuItem, Converter={StaticResource StringEqualsValue}, ConverterParameter='dashboard'}"
									Margin="5">
								<Grid ColumnDefinitions="40,*">
									<TextBlock Grid.Column="0" Text="ðŸ " FontSize="14"
											  HorizontalAlignment="Center" VerticalAlignment="Center"/>
									<TextBlock Grid.Column="1" Text="Ð”Ð°ÑˆÐ±Ð¾Ñ€Ð´" VerticalAlignment="Center"
											  IsVisible="{Binding !IsSidebarCollapsed}" Margin="10,0,0,0"/>
								</Grid>
							</Button>

							<!-- Ð—Ð°ÐºÐ°Ð·Ñ‹ -->
							<Button Classes="navButton" Command="{Binding NavigateToOrders}"
									Tag="{Binding CurrentMenuItem, Converter={StaticResource StringEqualsValue}, ConverterParameter='orders'}"
									Margin="5">
								<Grid ColumnDefinitions="40,*">
									<TextBlock Grid.Column="0" Text="ðŸ“‹" FontSize="14"
											  HorizontalAlignment="Center" VerticalAlignment="Center"/>
									<TextBlock Grid.Column="1" Text="Ð—Ð°ÐºÐ°Ð·Ñ‹" VerticalAlignment="Center"
											  IsVisible="{Binding !IsSidebarCollapsed}" Margin="10,0,0,0"/>
								</Grid>
							</Button>

							<!-- Ð—Ð°Ð´Ð°Ñ‡Ð¸ -->
							<Button Classes="navButton" Command="{Binding NavigateToTasks}"
									Tag="{Binding CurrentMenuItem, Converter={StaticResource StringEqualsValue}, ConverterParameter='tasks'}"
									Margin="5">
								<Grid ColumnDefinitions="40,*">
									<TextBlock Grid.Column="0" Text="âœ“" FontSize="14"
											  HorizontalAlignment="Center" VerticalAlignment="Center"/>
									<TextBlock Grid.Column="1" Text="Ð—Ð°Ð´Ð°Ñ‡Ð¸" VerticalAlignment="Center"
											  IsVisible="{Binding !IsSidebarCollapsed}" Margin="10,0,0,0"/>
								</Grid>
							</Button>

							<!-- ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ -->
							<Button Classes="navButton" Command="{Binding NavigateToCalendar}"
									Tag="{Binding CurrentMenuItem, Converter={StaticResource StringEqualsValue}, ConverterParameter='calendar'}"
									Margin="5">
								<Grid ColumnDefinitions="40,*">
									<TextBlock Grid.Column="0" Text="ðŸ“…" FontSize="14"
											  HorizontalAlignment="Center" VerticalAlignment="Center"/>
									<TextBlock Grid.Column="1" Text="ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ" VerticalAlignment="Center"
											  IsVisible="{Binding !IsSidebarCollapsed}" Margin="10,0,0,0"/>
								</Grid>
							</Button>

							<!-- Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ -->
							<Button Classes="navButton" Command="{Binding NavigateToDocumentation}"
									Tag="{Binding CurrentMenuItem, Converter={StaticResource StringEqualsValue}, ConverterParameter='documentation'}"
									Margin="5">
								<Grid ColumnDefinitions="40,*">
									<TextBlock Grid.Column="0" Text="ðŸ“„" FontSize="14"
											  HorizontalAlignment="Center" VerticalAlignment="Center"/>
									<TextBlock Grid.Column="1" Text="Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ" VerticalAlignment="Center"
											  IsVisible="{Binding !IsSidebarCollapsed}" Margin="10,0,0,0"/>
								</Grid>
							</Button>

							<!-- ÐŸÑ€Ð¾Ð¸Ð·Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ -->
							<Button Classes="navButton" Command="{Binding NavigateToProduction}"
									Tag="{Binding CurrentMenuItem, Converter={StaticResource StringEqualsValue}, ConverterParameter='production'}"
									IsVisible="{Binding IsAdministratorOrManager}"
									Margin="5">
								<Grid ColumnDefinitions="40,*">
									<TextBlock Grid.Column="0" Text="ðŸ­" FontSize="14"
											  HorizontalAlignment="Center" VerticalAlignment="Center"/>
									<TextBlock Grid.Column="1" Text="ÐŸÑ€Ð¾Ð¸Ð·Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾" VerticalAlignment="Center"
											  IsVisible="{Binding !IsSidebarCollapsed}" Margin="10,0,0,0"/>
								</Grid>
							</Button>

							<!-- ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ° -->
							<Button Classes="navButton" Command="{Binding NavigateToAnalytics}"
									Tag="{Binding CurrentMenuItem, Converter={StaticResource StringEqualsValue}, ConverterParameter='analytics'}"
									IsVisible="{Binding IsAdministratorOrManager}"
									Margin="5">
								<Grid ColumnDefinitions="40,*">
									<TextBlock Grid.Column="0" Text="ðŸ“Š" FontSize="14"
											  HorizontalAlignment="Center" VerticalAlignment="Center"/>
									<TextBlock Grid.Column="1" Text="ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ°" VerticalAlignment="Center"
											  IsVisible="{Binding !IsSidebarCollapsed}" Margin="10,0,0,0"/>
								</Grid>
							</Button>

							<!-- Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ -->
							<Button Classes="navButton" Command="{Binding NavigateToNotifications}"
									Tag="{Binding CurrentMenuItem, Converter={StaticResource StringEqualsValue}, ConverterParameter='notifications'}"
									Margin="5">
								<Grid ColumnDefinitions="40,*,Auto">
									<TextBlock Grid.Column="0" Text="ðŸ””" FontSize="14"
											  HorizontalAlignment="Center" VerticalAlignment="Center"/>
									<TextBlock Grid.Column="1" Text="Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ" VerticalAlignment="Center"
											  IsVisible="{Binding !IsSidebarCollapsed}" Margin="10,0,0,0"/>
									<Border Grid.Column="2" Width="18" Height="18" CornerRadius="9" Background="#FF7043"
											IsVisible="{Binding !IsSidebarCollapsed}"
											Margin="5,0,0,0">
										<TextBlock Text="{Binding UnreadNotificationsCount}" FontSize="10" Foreground="White"
												   HorizontalAlignment="Center" VerticalAlignment="Center"/>
									</Border>
								</Grid>
							</Button>
							<!-- Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸ÑÐ¼Ð¸ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð²) -->
							<Button Classes="navButton" Command="{Binding NavigateToNotificationManagement}"
									Tag="{Binding CurrentMenuItem, Converter={StaticResource StringEqualsValue}, ConverterParameter='notification-management'}"
									
				IsVisible="{Binding $parent[Window].((vm:MainWindowViewModel)DataContext).IsAdministratorOrManager}"
				Margin="5">
								<Grid ColumnDefinitions="40,*">
									<TextBlock Grid.Column="0" Text="ðŸ“®" FontSize="14"
											  HorizontalAlignment="Center" VerticalAlignment="Center"/>
									<TextBlock Grid.Column="1" Text="ÐžÐ¿Ð¾Ð²ÐµÑ‰ÐµÐ½Ð¸Ñ" VerticalAlignment="Center"
											  IsVisible="{Binding !IsSidebarCollapsed}" Margin="10,0,0,0"/>
								</Grid>
							</Button>

							<!-- ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ -->
							<Button Classes="navButton" Command="{Binding NavigateToSettings}"
									Tag="{Binding CurrentMenuItem, Converter={StaticResource StringEqualsValue}, ConverterParameter='settings'}"
									Margin="5">
								<Grid ColumnDefinitions="40,*">
									<TextBlock Grid.Column="0" Text="âš™ï¸" FontSize="14"
											  HorizontalAlignment="Center" VerticalAlignment="Center"/>
									<TextBlock Grid.Column="1" Text="ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸" VerticalAlignment="Center"
											  IsVisible="{Binding !IsSidebarCollapsed}" Margin="10,0,0,0"/>
								</Grid>
							</Button>

							<!-- Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼Ð¸ -->
							<Button Classes="navButton" Command="{Binding NavigateToUserManagement}"
									Tag="{Binding CurrentMenuItem, Converter={StaticResource StringEqualsValue}, ConverterParameter='user-management'}"
									IsVisible="{Binding IsAdministrator}"
									Margin="5">
								<Grid ColumnDefinitions="40,*">
									<TextBlock Grid.Column="0" Text="ðŸ‘¥" FontSize="14"
											  HorizontalAlignment="Center" VerticalAlignment="Center"/>
									<TextBlock Grid.Column="1" Text="ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸" VerticalAlignment="Center"
											  IsVisible="{Binding !IsSidebarCollapsed}" Margin="10,0,0,0"/>
								</Grid>
							</Button>
						</StackPanel>
					</ScrollViewer>
				</Border>
			</Grid>

			<!-- ÐšÐ½Ð¾Ð¿ÐºÐ° ÑÐ²Ð¾Ñ€Ð°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ñ/Ñ€Ð°Ð·Ð²Ð¾Ñ€Ð°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ñ Ð±Ð¾ÐºÐ¾Ð²Ð¾Ð¹ Ð¿Ð°Ð½ÐµÐ»Ð¸ -->
			<Button Grid.Row="1" Grid.Column="0"
					Width="24" Height="24"
					HorizontalAlignment="Right" VerticalAlignment="Top"
					Margin="0,10,0,0"
					Background="Transparent" BorderThickness="0"
					Command="{Binding ToggleSidebar}"
					ZIndex="100"
					IsVisible="{Binding IsAuthenticated}">
				<TextBlock Text="{Binding IsSidebarCollapsed, Converter={StaticResource BoolToValue}, ConverterParameter='â¯,â®'}"
						  FontSize="12" Foreground="White"/>
			</Button>

			<!-- ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð° (Ð²Ñ‚Ð¾Ñ€Ð¾Ð¹ ÑÑ‚Ð¾Ð»Ð±ÐµÑ†, Ð²Ñ‚Ð¾Ñ€Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ°) -->
			<ContentPresenter Grid.Row="1" Grid.Column="1"
							  Content="{Binding CurrentView}"
							  Margin="0"
							  IsVisible="True" />
		</Grid>
	</Grid>
</Window>