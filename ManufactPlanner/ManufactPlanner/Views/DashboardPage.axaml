<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:ManufactPlanner.ViewModels"
             xmlns:converters="using:ManufactPlanner.Converters"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="ManufactPlanner.Views.DashboardPage"
             x:DataType="vm:DashboardViewModel"
			 xmlns:sp="clr-namespace:ScottPlot.Avalonia;assembly=ScottPlot.Avalonia">

	<UserControl.Resources>
		<converters:BoolToValueConverter x:Key="BoolToValue"/>
		<converters:StatusToBrushConverter x:Key="StatusToBrushConverter"/>
		<converters:PercentToWidthConverter x:Key="PercentToWidthConverter"/>
		<converters:SubtractHalfPointConverter x:Key="SubtractHalfPoint"/>
		<converters:PercentageToWidthConverter x:Key="PercentageToWidth"/>
	</UserControl.Resources>

	<Grid RowDefinitions="Auto,Auto,*" Margin="20">
		<!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹ -->
		<Grid Grid.Row="0" ColumnDefinitions="*,Auto" Margin="0,0,0,15">
			<StackPanel>
				<TextBlock Text="Ð”Ð°ÑˆÐ±Ð¾Ñ€Ð´" FontSize="24" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}"/>
				<StackPanel Orientation="Horizontal" Spacing="5" Margin="0,5,0,0">
					<TextBlock Text="{Binding UserName}" FontSize="14" Foreground="{DynamicResource TextSecondaryBrush}"/>
					<TextBlock Text="|" FontSize="14" Foreground="{DynamicResource TextSecondaryBrush}" Opacity="0.5"/>
					<TextBlock Text="{Binding UserRole}" FontSize="14" Foreground="{DynamicResource TextSecondaryBrush}" Opacity="0.7"/>
				</StackPanel>
			</StackPanel>

			<Button Grid.Column="1" Content="ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ" Command="{Binding RefreshDataCommand}"
					Background="{DynamicResource PrimaryBrush}" Foreground="White" CornerRadius="6"
					Padding="16,8" MinWidth="100" VerticalAlignment="Center"/>
		</Grid>

		<!-- ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ¸ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸ -->
		<Grid Grid.Row="1" RowDefinitions="Auto" Margin="0,0,0,30">
			<Grid x:Name="WideLayoutGrid">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*" MinWidth="200"/>
					<ColumnDefinition Width="*" MinWidth="200"/>
					<ColumnDefinition Width="*" MinWidth="200"/>
				</Grid.ColumnDefinitions>

				<!-- ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ° 1: ÐÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸ -->
				<Border Grid.Column="0" Height="120"
						Background="{DynamicResource SurfaceBrush}" CornerRadius="12"
						Margin="0,0,10,0">
					<Grid Margin="15" RowDefinitions="Auto,*,Auto">
						<TextBlock Grid.Row="0" Text="ÐÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸" FontSize="14"
								   Foreground="{DynamicResource TextSecondaryBrush}" Opacity="0.8"/>

						<TextBlock Grid.Row="1" Text="{Binding ActiveTasksCount}" FontSize="32"
								   FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}"
								   VerticalAlignment="Center"/>

						<Border Grid.Row="2" Height="24" CornerRadius="12" Background="{DynamicResource SuccessBrush}"
								Opacity="0.15" HorizontalAlignment="Right" Padding="10,0">
							<TextBlock Text="+12%" FontSize="12" Foreground="{DynamicResource SuccessBrush}"
									   HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Border>
					</Grid>
				</Border>

				<!-- ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ° 2: ÐÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… Ð·Ð°ÐºÐ°Ð·Ð¾Ð² -->
				<Border Grid.Column="1" Height="120"
						Background="{DynamicResource SurfaceBrush}" CornerRadius="12"
						Margin="5,0">
					<Grid Margin="15" RowDefinitions="Auto,*,Auto">
						<TextBlock Grid.Row="0" Text="ÐÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… Ð·Ð°ÐºÐ°Ð·Ð¾Ð²" FontSize="14"
								   Foreground="{DynamicResource TextSecondaryBrush}" Opacity="0.8"/>

						<TextBlock Grid.Row="1" Text="{Binding ActiveOrdersCount}" FontSize="32"
								   FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}"
								   VerticalAlignment="Center"/>

						<Border Grid.Row="2" Height="24" CornerRadius="12" Background="{DynamicResource ErrorBrush}"
								Opacity="0.15" HorizontalAlignment="Right" Padding="10,0">
							<TextBlock Text="-3%" FontSize="12" Foreground="{DynamicResource ErrorBrush}"
									   HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Border>
					</Grid>
				</Border>

				<!-- ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ° 3: Ð”ÐµÐ´Ð»Ð°Ð¹Ð½Ð¾Ð² ÑÐµÐ³Ð¾Ð´Ð½Ñ -->
				<Border Grid.Column="2" Height="120"
						Background="{DynamicResource SurfaceBrush}" CornerRadius="12"
						Margin="10,0,0,0">
					<Grid Margin="15" RowDefinitions="Auto,*,Auto">
						<TextBlock Grid.Row="0" Text="Ð”ÐµÐ´Ð»Ð°Ð¹Ð½Ð¾Ð² ÑÐµÐ³Ð¾Ð´Ð½Ñ" FontSize="14"
								   Foreground="{DynamicResource TextSecondaryBrush}" Opacity="0.8"/>

						<TextBlock Grid.Row="1" Text="{Binding DeadlinesTodayCount}" FontSize="32"
								   FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}"
								   VerticalAlignment="Center"/>

						<Border Grid.Row="2" Height="24" CornerRadius="12" Background="{DynamicResource WarningBrush}"
								Opacity="0.15" HorizontalAlignment="Right" Padding="10,0">
							<TextBlock Text="Ð¡Ñ€Ð¾Ñ‡Ð½Ð¾" FontSize="12" Foreground="{DynamicResource WarningBrush}"
									   HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Border>
					</Grid>
				</Border>
			</Grid>
		</Grid>

		<!-- ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ ÐºÐ¾Ð½Ñ‚ÐµÐ½Ñ‚Ð° -->
		<Grid Grid.Row="2" ColumnDefinitions="2*,1*">
			<!-- Ð Ð°Ð·Ð´ÐµÐ» ÑÐ¾ ÑÐ¿Ð¸ÑÐºÐ¾Ð¼ Ð·Ð°Ð´Ð°Ñ‡ -->
			<Grid Grid.Column="0" RowDefinitions="Auto,*" Margin="0,0,15,0">
				<!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº ÑÐµÐºÑ†Ð¸Ð¸ Ð·Ð°Ð´Ð°Ñ‡ -->
				<Grid Grid.Row="0" ColumnDefinitions="*,Auto" Margin="0,0,0,15">
					<TextBlock Text="ÐÐµÐ´Ð°Ð²Ð½Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸" FontSize="18" FontWeight="Bold"
							   Foreground="{DynamicResource TextPrimaryBrush}"/>
					<Button Grid.Column="1" Command="{Binding ViewTasksCommand}"
							Content="Ð’ÑÐµ Ð·Ð°Ð´Ð°Ñ‡Ð¸ â†’" Foreground="{DynamicResource PrimaryBrush}"
							Background="Transparent" BorderThickness="0" Padding="10,5"/>
				</Grid>

				<!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð·Ð°Ð´Ð°Ñ‡ -->
				<Border Grid.Row="1" Background="{DynamicResource SurfaceBrush}" CornerRadius="12">
					<ScrollViewer VerticalScrollBarVisibility="Auto">
						<StackPanel Margin="15">
							<Rectangle Height="1" Fill="{DynamicResource BorderBrush}"
									   Margin="0,0,0,15" Opacity="0.5"/>

							<ItemsControl ItemsSource="{Binding RecentTasks}">
								<ItemsControl.ItemTemplate>
									<DataTemplate>
										<Border Background="{DynamicResource BackgroundBrush}" CornerRadius="8"
												Margin="0,0,0,10" Padding="15">
											<Grid ColumnDefinitions="*,Auto">
												<StackPanel>
													<TextBlock Text="{Binding Name}" FontSize="15" FontWeight="Medium"
															   Foreground="{DynamicResource TextPrimaryBrush}"
															   TextWrapping="Wrap"/>
													<TextBlock Text="{Binding Description}" FontSize="13"
															   Foreground="{DynamicResource TextSecondaryBrush}"
															   Opacity="0.8" TextWrapping="Wrap" Margin="0,5,0,0"/>
												</StackPanel>

												<Border Grid.Column="1" Height="28" CornerRadius="14"
														Background="{Binding Status, Converter={StaticResource StatusToBrushConverter}}"
														Opacity="0.15" Padding="12,0" Margin="10,0,0,0"
														VerticalAlignment="Top">
													<TextBlock Text="{Binding Status}" FontSize="12"
															   Foreground="{Binding Status, Converter={StaticResource StatusToBrushConverter}}"
															   HorizontalAlignment="Center" VerticalAlignment="Center"/>
												</Border>
											</Grid>
										</Border>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
							</ItemsControl>

							<!-- ÐšÐ¾Ð³Ð´Ð° Ð½ÐµÑ‚ Ð·Ð°Ð´Ð°Ñ‡ -->
							<Border IsVisible="{Binding !RecentTasks.Count}" Padding="40,20">
								<StackPanel HorizontalAlignment="Center">
									<TextBlock Text="ðŸ“‹" FontSize="36" HorizontalAlignment="Center" Opacity="0.5"/>
									<TextBlock Text="ÐÐµÑ‚ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… Ð·Ð°Ð´Ð°Ñ‡" FontSize="14"
											   Foreground="{DynamicResource TextSecondaryBrush}" Opacity="0.7"
											   HorizontalAlignment="Center" Margin="0,10,0,0"/>
								</StackPanel>
							</Border>
						</StackPanel>
					</ScrollViewer>
				</Border>
			</Grid>

			<!-- ÐŸÑ€Ð°Ð²Ð°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ Ñ ÐºÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÐµÐ¼ Ð¸ Ð³Ñ€Ð°Ñ„Ð¸ÐºÐ°Ð¼Ð¸ -->
			<ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto">
				<StackPanel Spacing="15">
					<!-- ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ -->
					<Border Background="{DynamicResource SurfaceBrush}" CornerRadius="12" MinHeight="200">
						<StackPanel Margin="15">
							<Grid ColumnDefinitions="*,Auto" Margin="0,0,0,15">
								<TextBlock Text="ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ" FontSize="16" FontWeight="Bold"
										   Foreground="{DynamicResource TextPrimaryBrush}"/>
								<Button Grid.Column="1" Command="{Binding ViewCalendarCommand}"
										Content="â†’" Foreground="{DynamicResource PrimaryBrush}"
										Background="Transparent" BorderThickness="0" Padding="8"/>
							</Grid>

							<TextBlock Text="{Binding CurrentMonthYear}" FontSize="15" FontWeight="Medium"
									   HorizontalAlignment="Center" Margin="0,0,0,15"/>

							<!-- Ð”Ð½Ð¸ Ð½ÐµÐ´ÐµÐ»Ð¸ -->
							<Grid Margin="0,0,0,10">
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="*"/>
									<ColumnDefinition Width="*"/>
									<ColumnDefinition Width="*"/>
									<ColumnDefinition Width="*"/>
									<ColumnDefinition Width="*"/>
									<ColumnDefinition Width="*"/>
									<ColumnDefinition Width="*"/>
								</Grid.ColumnDefinitions>

								<TextBlock Grid.Column="0" Text="ÐŸÐ½" FontSize="12"
										   Foreground="{DynamicResource TextSecondaryBrush}"
										   HorizontalAlignment="Center"/>
								<TextBlock Grid.Column="1" Text="Ð’Ñ‚" FontSize="12"
										   Foreground="{DynamicResource TextSecondaryBrush}"
										   HorizontalAlignment="Center"/>
								<TextBlock Grid.Column="2" Text="Ð¡Ñ€" FontSize="12"
										   Foreground="{DynamicResource TextSecondaryBrush}"
										   HorizontalAlignment="Center"/>
								<TextBlock Grid.Column="3" Text="Ð§Ñ‚" FontSize="12"
										   Foreground="{DynamicResource TextSecondaryBrush}"
										   HorizontalAlignment="Center"/>
								<TextBlock Grid.Column="4" Text="ÐŸÑ‚" FontSize="12"
										   Foreground="{DynamicResource TextSecondaryBrush}"
										   HorizontalAlignment="Center"/>
								<TextBlock Grid.Column="5" Text="Ð¡Ð±" FontSize="12"
										   Foreground="{DynamicResource TextSecondaryBrush}"
										   HorizontalAlignment="Center"/>
								<TextBlock Grid.Column="6" Text="Ð’Ñ" FontSize="12"
										   Foreground="{DynamicResource TextSecondaryBrush}"
										   HorizontalAlignment="Center"/>
							</Grid>

							<!-- Ð”Ð½Ð¸ ÐºÐ°Ð»ÐµÐ½Ð´Ð°Ñ€Ñ -->
							<ItemsControl ItemsSource="{Binding CalendarItems}">
								<ItemsControl.ItemsPanel>
									<ItemsPanelTemplate>
										<UniformGrid Columns="7" MinWidth="200"/>
									</ItemsPanelTemplate>
								</ItemsControl.ItemsPanel>
								<ItemsControl.ItemTemplate>
									<DataTemplate>
										<Border Height="32" CornerRadius="16" Margin="2"
												Background="{Binding IsToday, Converter={StaticResource BoolToValue}, ConverterParameter='{DynamicResource PrimaryBrush} 0.15,Transparent'}">
											<Grid>
												<TextBlock Text="{Binding Day}" FontSize="13"
														  Foreground="{Binding IsToday, Converter={StaticResource BoolToValue}, ConverterParameter='{DynamicResource PrimaryBrush},{DynamicResource TextPrimaryBrush}'}"
														  FontWeight="{Binding IsToday, Converter={StaticResource BoolToValue}, ConverterParameter='Bold,Normal'}"
														  HorizontalAlignment="Center" VerticalAlignment="Center"/>
												<!-- Ð˜Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ -->
												<Ellipse Width="6" Height="6" Fill="{DynamicResource PrimaryBrush}"
														 VerticalAlignment="Bottom" Margin="0,0,0,3"
														 IsVisible="{Binding HasEvents}" HorizontalAlignment="Center"/>
											</Grid>
										</Border>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
							</ItemsControl>
						</StackPanel>
					</Border>

					<!-- Ð“Ñ€Ð°Ñ„Ð¸Ðº Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð·Ð°Ð´Ð°Ñ‡ Ñ Ð»ÐµÐ³ÐµÐ½Ð´Ð¾Ð¹ ÑÐ½Ð¸Ð·Ñƒ -->
					<Border Background="{DynamicResource SurfaceBrush}" CornerRadius="12" MinHeight="250">
						<Grid RowDefinitions="Auto,*,Auto">
							<TextBlock Grid.Row="0" Text="Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð·Ð°Ð´Ð°Ñ‡" FontSize="14" FontWeight="Bold"
									   Foreground="{DynamicResource TextPrimaryBrush}" Margin="15,15,0,10"/>
							<sp:AvaPlot Grid.Row="1" x:Name="TaskCompletionPlot"
										MinHeight="180" Margin="10,0,10,10"/>
							<!-- Ð›ÐµÐ³ÐµÐ½Ð´Ð° ÑÐ½Ð¸Ð·Ñƒ -->
							<StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,15">
								<StackPanel Orientation="Horizontal" Margin="0,5">
									<Border Width="16" Height="3" Background="#00ACC1" VerticalAlignment="Center"/>
									<TextBlock Text="Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð½Ñ‹Ðµ" FontSize="12" Margin="8,0" VerticalAlignment="Center"/>
								</StackPanel>
								<StackPanel Orientation="Horizontal" Margin="20,5,0,5">
									<Border Width="16" Height="3" Background="#9575CD" VerticalAlignment="Center"/>
									<TextBlock Text="Ð—Ð°Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ" FontSize="12" Margin="8,0" VerticalAlignment="Center"/>
								</StackPanel>
							</StackPanel>
						</Grid>
					</Border>

					<!-- Ð“Ñ€Ð°Ñ„Ð¸Ðº ÑÑ‚Ð°Ñ‚ÑƒÑÐ¾Ð² Ð·Ð°Ð´Ð°Ñ‡ Ñ Ð»ÐµÐ³ÐµÐ½Ð´Ð¾Ð¹ ÑÐ½Ð¸Ð·Ñƒ -->
					<Border Background="{DynamicResource SurfaceBrush}" CornerRadius="12" MinHeight="280">
						<Grid RowDefinitions="Auto,*,Auto">
							<TextBlock Grid.Row="0" Text="Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð¿Ð¾ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°Ð¼" FontSize="14" FontWeight="Bold"
									   Foreground="{DynamicResource TextPrimaryBrush}" Margin="15,15,0,10"/>
							<sp:AvaPlot Grid.Row="1" x:Name="TaskStatusPieChart"
										MinHeight="180" Margin="10,0,10,10"/>
							<!-- Ð›ÐµÐ³ÐµÐ½Ð´Ð° ÑÑ‚Ð°Ñ‚ÑƒÑÐ¾Ð² ÑÐ½Ð¸Ð·Ñƒ -->
							<StackPanel Grid.Row="2" HorizontalAlignment="Center" Margin="0,0,0,15">
								<WrapPanel Orientation="Horizontal" HorizontalAlignment="Center">
									<StackPanel Orientation="Horizontal" Margin="10,5">
										<Ellipse Width="10" Height="10" Fill="#00ACC1" VerticalAlignment="Center"/>
										<TextBlock Text="Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¾" FontSize="11" Margin="8,0" VerticalAlignment="Center"/>
									</StackPanel>
									<StackPanel Orientation="Horizontal" Margin="10,5">
										<Ellipse Width="10" Height="10" Fill="#4CAF9D" VerticalAlignment="Center"/>
										<TextBlock Text="Ð’ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐµ" FontSize="11" Margin="8,0" VerticalAlignment="Center"/>
									</StackPanel>
									<StackPanel Orientation="Horizontal" Margin="10,5">
										<Ellipse Width="10" Height="10" Fill="#FFB74D" VerticalAlignment="Center"/>
										<TextBlock Text="Ð’ Ð¾Ñ‡ÐµÑ€ÐµÐ´Ð¸" FontSize="11" Margin="8,0" VerticalAlignment="Center"/>
									</StackPanel>
									<StackPanel Orientation="Horizontal" Margin="10,5">
										<Ellipse Width="10" Height="10" Fill="#FF7043" VerticalAlignment="Center"/>
										<TextBlock Text="ÐŸÑ€Ð¾ÑÑ€Ð¾Ñ‡ÐµÐ½Ð¾" FontSize="11" Margin="8,0" VerticalAlignment="Center"/>
									</StackPanel>
									<StackPanel Orientation="Horizontal" Margin="10,5">
										<Ellipse Width="10" Height="10" Fill="#9575CD" VerticalAlignment="Center"/>
										<TextBlock Text="ÐžÑ‚Ð¼ÐµÐ½ÐµÐ½Ð¾" FontSize="11" Margin="8,0" VerticalAlignment="Center"/>
									</StackPanel>
								</WrapPanel>
							</StackPanel>
						</Grid>
					</Border>
				</StackPanel>
			</ScrollViewer>
		</Grid>
	</Grid>
</UserControl>